<template>
    <template if:false={isedit}>
        <lightning-card title="Certification Requests List" icon-name="utility:list">
            <template if:true={certificationrequests}>
                    <div style="width: auto;" class="slds-m-around_medium">
                        <table class="slds-table slds-table_bordered slds-p-top_x-small slds-border_left slds-border_right" >
                        <tr><td><lightning-input label="Search" onchange={handleChange}
                            placeholder="Search Certification Request By Id !" value={sstext}></lightning-input></td>
                            <td> <lightning-button label="Add Certification Request" icon-name="utility:add" onclick={addEmp}></lightning-button></td>
                            <td><lightning-button label="Previous" icon-name="utility:chevronleft" onclick={previousHandler2}></lightning-button></td>
                        <td><lightning-button label="Next" icon-name="utility:chevronright" onclick={nextHandler2}></lightning-button></td>
                        </tr>
                        </table>    
                                  
                    <table class="slds-table slds-table_bordered slds-p-top_x-small slds-border_left slds-border_right" >
                        <tr>
                            <th><div class="slds-truncate">Sl. No.</div></th>
                            <th><div class="slds-truncate">Request Id</div></th>
                         <!--   <th><div class="slds-truncate">Image</div></th>  -->
                            <th><div class="slds-truncate">Employee</div></th>
                            <th><div class="slds-truncate">Certificate</div></th>
                            <th><div class="slds-truncate">Voucher</div></th>
                            <th><div class="slds-truncate">Status</div></th>
                            <th><div class="slds-truncate">Due Date</div></th>
                            <th><div class="slds-truncate">Comments</div></th>
                            <th><div class="slds-truncate">Update</div></th>
                            <th><div class="slds-truncate">Delete</div></th>
                        </tr>
                        <template for:each={certificationrequests} for:item="tr" for:index="t">
                        <tr key={tr.Id}>
                            <!-- <td><input type="button" value={tr.Id} onclick={dosomething}></td> -->
                            <td><div class="slds-truncate" onclick={viewrec} data-value={tr.Id}><lightning-button icon-name="action:preview" ></lightning-button></div></td>
                            <td><div class="slds-truncate" onclick={removeItem} data-value={tr.Id}>{tr.Name}</div></td>  
                          <!--  <td class="imagee"><lightning-formatted-rich-text value={tr.Image__c} alt="NoImage"></lightning-formatted-rich-text></td>  -->
                            <td><div class="slds-truncate" onclick={removeItem} data-value={tr.Id}>{tr.Employee__r.Name}</div></td>
                            <td><div class="slds-truncate" onclick={removeItem} data-value={tr.Id}>{tr.Certification__r.Cert_Name__c}</div></td>
                            <td><div class="slds-truncate" onclick={removeItem} data-value={tr.Id}>{tr.Voucher__c}</div></td>
                            <td><div class="slds-truncate" onclick={removeItem} data-value={tr.Id}>{tr.Status__c}</div></td>
                            <td><div class="slds-truncate" onclick={removeItem} data-value={tr.Id}>{tr.Due_Date__c}</div></td>
                            <td><div class="slds-truncate" onclick={removeItem} data-value={tr.Id}>{tr.Comments__c}</div></td>
                            <td><div class="slds-truncate" onclick={editEmp} data-value={tr.Id}><lightning-button label="Edit" icon-name="utility:edit"></lightning-button></div></td>
                            <td><div class="slds-truncate" onclick={deleteEmp} data-value={tr.Id}><lightning-button label="Delete" variant="destructive" icon-name="utility:delete"></lightning-button></div></td>
                            
                         </tr>
                    </template>
                </table>
                    </div>
                <br/>
                </template>
    
                <template if:true={error}>
                    {error}
                </template>
     
    </lightning-card>
    
        </template>
            <template if:true={isedit}>             
                             <div style="margin: auto;">
                                <lightning-record-edit-form record-id={id_str} object-api-name="Certification_Request__c" onsuccess={handleEmployeeEdited}>
                                    <div class="slds-m-around_medium">
                                        <lightning-messages>
                                        </lightning-messages>                            
                                        <lightning-input-field field-name='Name'></lightning-input-field>
                                        <lightning-input-field field-name='Employee__c'></lightning-input-field>
                                        <lightning-input-field field-name='Certification__c'></lightning-input-field>
                                        <lightning-input-field field-name='Voucher__c'></lightning-input-field>
                                        <lightning-input-field field-name='Status__c'></lightning-input-field>
                                        <lightning-input-field field-name='Due_Date__c'></lightning-input-field>
                                        <lightning-input-field field-name='Comments__c' ></lightning-input-field>
                                        <br>
                                        <center>
                                                <lightning-button class="slds-m-top_small" type="submit" label="Update Voucher" variant="success"></lightning-button>
                                            </center>
                                    </div>
                                </lightning-record-edit-form>
                            </div>
            
        
        </template>
</template>